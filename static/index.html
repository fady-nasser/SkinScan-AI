<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0f0f23">
    <meta name="description"
        content="AI-powered skin cancer detection app - analyze skin lesions for potential malignancy">

    <!-- PWA Settings -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#0ea5e9">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="SkinScan">
    <link rel="apple-touch-icon" href="icon.png">
    <link rel="icon" type="image/png" href="icon.png">

    <title>SkinScan AI - Skin Cancer Detection</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
</head>

<body>
    <div id="app">
        <!-- ==================== HOME SCREEN ==================== -->
        <div id="screen-home" class="screen active">
            <div class="screen-content">
                <header class="home-header">
                    <div class="logo-container">
                        <div class="logo-icon">
                            <svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="50" cy="50" r="45" stroke="url(#logoGradient)" stroke-width="4" />
                                <circle cx="50" cy="50" r="25" fill="url(#logoGradient)" opacity="0.3" />
                                <circle cx="50" cy="50" r="15" fill="url(#logoGradient)" />
                                <path d="M30 50 L70 50 M50 30 L50 70" stroke="white" stroke-width="3"
                                    stroke-linecap="round" />
                                <defs>
                                    <linearGradient id="logoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                        <stop offset="0%" stop-color="#00d9ff" />
                                        <stop offset="100%" stop-color="#00ff88" />
                                    </linearGradient>
                                </defs>
                            </svg>
                        </div>
                        <h1 class="app-title">SkinScan<span class="highlight">AI</span></h1>
                        <p class="app-subtitle">AI-Powered Skin Lesion Analysis</p>
                    </div>
                </header>

                <main class="home-main">
                    <div class="action-cards">
                        <button class="action-card primary" id="btn-start-scan">
                            <div class="card-icon">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path
                                        d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z" />
                                    <circle cx="12" cy="13" r="4" />
                                </svg>
                            </div>
                            <div class="card-text">
                                <h3>Start New Scan</h3>
                                <p>Capture a photo of a skin lesion</p>
                            </div>
                            <div class="card-arrow">‚Üí</div>
                        </button>

                        <button class="action-card secondary" id="btn-upload-image">
                            <div class="card-icon">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                                    <polyline points="17 8 12 3 7 8" />
                                    <line x1="12" y1="3" x2="12" y2="15" />
                                </svg>
                            </div>
                            <div class="card-text">
                                <h3>Upload Image</h3>
                                <p>Select from your gallery</p>
                            </div>
                            <div class="card-arrow">‚Üí</div>
                        </button>
                    </div>

                    <div class="disclaimer-card">
                        <div class="disclaimer-icon">‚ö†Ô∏è</div>
                        <p>This tool provides AI-assisted screening only. It is <strong>not a medical
                                diagnosis</strong>. Always consult a healthcare professional.</p>
                    </div>
                </main>

                <nav class="bottom-nav">
                    <button class="nav-item active" data-screen="home">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" />
                            <polyline points="9 22 9 12 15 12 15 22" />
                        </svg>
                        <span>Home</span>
                    </button>
                    <button class="nav-item" data-screen="history">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10" />
                            <polyline points="12 6 12 12 16 14" />
                        </svg>
                        <span>History</span>
                    </button>
                    <button class="nav-item" data-screen="info">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10" />
                            <line x1="12" y1="16" x2="12" y2="12" />
                            <line x1="12" y1="8" x2="12.01" y2="8" />
                        </svg>
                        <span>Info</span>
                    </button>
                </nav>
            </div>
        </div>

        <!-- ==================== CAMERA SCREEN ==================== -->
        <div id="screen-camera" class="screen">
            <div class="screen-content camera-screen">
                <div class="camera-header">
                    <button class="icon-btn" id="btn-camera-back">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="19" y1="12" x2="5" y2="12" />
                            <polyline points="12 19 5 12 12 5" />
                        </svg>
                    </button>
                    <h2>Capture Lesion</h2>
                    <button class="icon-btn" id="btn-flash-toggle">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" id="flash-icon">
                            <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2" />
                        </svg>
                    </button>
                </div>

                <div class="camera-container">
                    <video id="camera-preview" autoplay playsinline></video>
                    <div class="camera-overlay">
                        <div class="scan-guide">
                            <div class="guide-circle"></div>
                            <p class="guide-text">Center the lesion in the circle</p>
                        </div>
                    </div>
                    <div class="camera-error" id="camera-error" style="display: none;">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10" />
                            <line x1="15" y1="9" x2="9" y2="15" />
                            <line x1="9" y1="9" x2="15" y2="15" />
                        </svg>
                        <p>Camera access denied</p>
                        <small>Please allow camera access or upload an image instead</small>
                    </div>
                </div>

                <div class="camera-controls">
                    <button class="capture-btn" id="btn-capture">
                        <div class="capture-inner"></div>
                    </button>
                </div>
            </div>
        </div>

        <!-- ==================== UPLOAD/PREVIEW SCREEN ==================== -->
        <div id="screen-upload" class="screen">
            <div class="screen-content">
                <div class="standard-header">
                    <button class="icon-btn" id="btn-upload-back">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="19" y1="12" x2="5" y2="12" />
                            <polyline points="12 19 5 12 12 5" />
                        </svg>
                    </button>
                    <h2>Upload Image</h2>
                    <div class="spacer"></div>
                </div>

                <div class="upload-content">
                    <div class="upload-area" id="upload-area">
                        <input type="file" id="file-input" accept="image/*" hidden>
                        <div class="upload-placeholder" id="upload-placeholder">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
                                <circle cx="8.5" cy="8.5" r="1.5" />
                                <polyline points="21 15 16 10 5 21" />
                            </svg>
                            <p>Tap to select an image</p>
                            <small>or drag and drop here</small>
                        </div>
                        <img id="upload-preview" class="upload-preview" src="" alt="Selected image"
                            style="display: none;">
                    </div>

                    <div class="upload-actions" id="upload-actions" style="display: none;">
                        <button class="btn btn-outline" id="btn-choose-different">
                            Choose Different
                        </button>
                        <button class="btn btn-primary" id="btn-continue-to-preprocess">
                            Continue
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ==================== PREPROCESSING SCREEN ==================== -->
        <div id="screen-preprocess" class="screen">
            <div class="screen-content">
                <div class="standard-header">
                    <button class="icon-btn" id="btn-preprocess-back">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="19" y1="12" x2="5" y2="12" />
                            <polyline points="12 19 5 12 12 5" />
                        </svg>
                    </button>
                    <h2>Prepare Image</h2>
                    <div class="spacer"></div>
                </div>

                <div class="preprocess-content">
                    <div class="crop-container">
                        <div class="crop-wrapper" id="crop-wrapper">
                            <img id="preprocess-image" src="" alt="Image to preprocess">
                            <div class="crop-overlay" id="crop-overlay">
                                <div class="crop-box" id="crop-box">
                                    <div class="crop-handle nw"></div>
                                    <div class="crop-handle ne"></div>
                                    <div class="crop-handle sw"></div>
                                    <div class="crop-handle se"></div>
                                </div>
                            </div>
                        </div>
                        <p class="crop-hint">Drag the corners to crop around the lesion</p>
                    </div>

                    <div class="enhance-controls">
                        <div class="enhance-row">
                            <label>Brightness</label>
                            <input type="range" id="brightness-slider" min="50" max="150" value="100">
                            <span id="brightness-value">100%</span>
                        </div>
                        <div class="enhance-row">
                            <label>Contrast</label>
                            <input type="range" id="contrast-slider" min="50" max="150" value="100">
                            <span id="contrast-value">100%</span>
                        </div>
                    </div>

                    <button class="btn btn-primary btn-large" id="btn-analyze">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8" />
                            <line x1="21" y1="21" x2="16.65" y2="16.65" />
                        </svg>
                        Analyze with AI
                    </button>
                </div>
            </div>
        </div>

        <!-- ==================== LOADING SCREEN ==================== -->
        <div id="screen-loading" class="screen">
            <div class="screen-content loading-screen">
                <div class="loading-container">
                    <div class="loading-animation">
                        <div class="pulse-ring"></div>
                        <div class="pulse-ring"></div>
                        <div class="pulse-ring"></div>
                        <div class="loading-icon">
                            <svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="50" cy="50" r="45" stroke="url(#loadingGradient)" stroke-width="4" />
                                <circle cx="50" cy="50" r="15" fill="url(#loadingGradient)" />
                                <defs>
                                    <linearGradient id="loadingGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                        <stop offset="0%" stop-color="#00d9ff" />
                                        <stop offset="100%" stop-color="#00ff88" />
                                    </linearGradient>
                                </defs>
                            </svg>
                        </div>
                    </div>
                    <h2>Analyzing Image...</h2>
                    <p>Our AI is examining the skin lesion</p>
                    <div class="loading-progress">
                        <div class="progress-bar"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ==================== RESULTS SCREEN ==================== -->
        <div id="screen-results" class="screen">
            <div class="screen-content">
                <div class="standard-header">
                    <button class="icon-btn" id="btn-results-close">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18" />
                            <line x1="6" y1="6" x2="18" y2="18" />
                        </svg>
                    </button>
                    <h2>Analysis Result</h2>
                    <div class="spacer"></div>
                </div>

                <div class="results-content">
                    <div class="result-card" id="result-card">
                        <div class="result-image-container">
                            <img id="result-thumbnail" src="" alt="Analyzed lesion">
                        </div>

                        <div class="result-badge" id="result-badge">
                            <span class="result-label" id="result-label">BENIGN</span>
                        </div>

                        <div class="result-detail" id="result-detail">Likely Benign</div>

                        <div class="confidence-section">
                            <div class="confidence-header">
                                <span>AI Confidence</span>
                                <span class="confidence-value" id="confidence-value">95%</span>
                            </div>
                            <div class="confidence-bar">
                                <div class="confidence-fill" id="confidence-fill"></div>
                            </div>
                        </div>
                    </div>

                    <div class="disclaimer-card results-disclaimer">
                        <div class="disclaimer-icon">‚ö†Ô∏è</div>
                        <p id="result-disclaimer">
                            This is an AI-powered screening tool for educational purposes only.
                            It is NOT a medical diagnosis. Always consult a qualified dermatologist
                            or healthcare professional for proper skin cancer screening and diagnosis.
                        </p>
                    </div>

                    <div class="results-actions">
                        <button class="btn btn-outline" id="btn-scan-again">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="23 4 23 10 17 10" />
                                <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10" />
                            </svg>
                            Scan Again
                        </button>
                        <button class="btn btn-primary" id="btn-save-result">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z" />
                                <polyline points="17 21 17 13 7 13 7 21" />
                                <polyline points="7 3 7 8 15 8" />
                            </svg>
                            Save to History
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ==================== HISTORY SCREEN ==================== -->
        <div id="screen-history" class="screen">
            <div class="screen-content">
                <div class="standard-header">
                    <div class="spacer"></div>
                    <h2>Scan History</h2>
                    <button class="icon-btn" id="btn-clear-history">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="3 6 5 6 21 6" />
                            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />
                        </svg>
                    </button>
                </div>

                <div class="history-content" id="history-content">
                    <div class="empty-state" id="history-empty">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <circle cx="12" cy="12" r="10" />
                            <polyline points="12 6 12 12 16 14" />
                        </svg>
                        <h3>No scans yet</h3>
                        <p>Your scan history will appear here</p>
                    </div>
                    <div class="history-list" id="history-list"></div>
                </div>

                <nav class="bottom-nav">
                    <button class="nav-item" data-screen="home">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" />
                            <polyline points="9 22 9 12 15 12 15 22" />
                        </svg>
                        <span>Home</span>
                    </button>
                    <button class="nav-item active" data-screen="history">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10" />
                            <polyline points="12 6 12 12 16 14" />
                        </svg>
                        <span>History</span>
                    </button>
                    <button class="nav-item" data-screen="info">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10" />
                            <line x1="12" y1="16" x2="12" y2="12" />
                            <line x1="12" y1="8" x2="12.01" y2="8" />
                        </svg>
                        <span>Info</span>
                    </button>
                </nav>
            </div>
        </div>

        <!-- ==================== INFO SCREEN ==================== -->
        <div id="screen-info" class="screen">
            <div class="screen-content">
                <div class="standard-header">
                    <div class="spacer"></div>
                    <h2>Information</h2>
                    <div class="spacer"></div>
                </div>

                <div class="info-content">
                    <div class="info-section">
                        <h3>üî¨ How It Works</h3>
                        <p>SkinScan AI uses a deep learning model trained on thousands of skin lesion images to classify
                            moles and lesions as either <strong>benign</strong> (non-cancerous) or
                            <strong>suspicious</strong> (potentially malignant).
                        </p>
                        <p>The AI analyzes visual patterns including shape, color, texture, and border characteristics
                            to make its prediction.</p>
                    </div>

                    <div class="info-section">
                        <h3>üì∏ Tips for Clear Images</h3>
                        <ul>
                            <li><strong>Good lighting:</strong> Use natural light or well-lit room. Avoid shadows.</li>
                            <li><strong>Steady focus:</strong> Keep your phone still and ensure the lesion is in focus.
                            </li>
                            <li><strong>Close-up:</strong> Fill the frame with the lesion while keeping it fully
                                visible.</li>
                            <li><strong>Clean skin:</strong> Gently clean the area before capturing.</li>
                            <li><strong>No flash:</strong> Direct flash can cause glare. Use ambient light instead.</li>
                        </ul>
                    </div>

                    <div class="info-section">
                        <h3>üß† About the Model</h3>
                        <p>This app uses a <strong>MobileNetV2</strong> neural network trained using transfer learning.
                            The model was trained on the Skin Cancer: Malignant vs. Benign dataset with 3,600
                            dermoscopic images.</p>
                    </div>

                    <div class="info-section warning">
                        <h3>‚ö†Ô∏è Important Disclaimer</h3>
                        <p>This application is for <strong>educational and informational purposes only</strong>. It is
                            NOT a substitute for professional medical advice, diagnosis, or treatment.</p>
                        <p><strong>Always consult a qualified dermatologist</strong> or healthcare professional for
                            proper skin cancer screening. If you notice any changes in a mole or skin lesion, please
                            seek medical attention immediately.</p>
                        <p>Early detection saves lives!</p>
                    </div>
                </div>

                <nav class="bottom-nav">
                    <button class="nav-item" data-screen="home">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" />
                            <polyline points="9 22 9 12 15 12 15 22" />
                        </svg>
                        <span>Home</span>
                    </button>
                    <button class="nav-item" data-screen="history">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10" />
                            <polyline points="12 6 12 12 16 14" />
                        </svg>
                        <span>History</span>
                    </button>
                    <button class="nav-item active" data-screen="info">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10" />
                            <line x1="12" y1="16" x2="12" y2="12" />
                            <line x1="12" y1="8" x2="12.01" y2="8" />
                        </svg>
                        <span>Info</span>
                    </button>
                </nav>
            </div>
        </div>
    </div>

    <!-- Hidden canvas for image processing -->
    <canvas id="processing-canvas" style="display: none;"></canvas>

    <script src="js/app.js"></script>
</body>

</html>